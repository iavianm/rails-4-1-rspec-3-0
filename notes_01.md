# **Everyday Rails Testing with RSpec**

>автор Aaron Sumner
*опубликована 20-12-2014*

Почитать отзывы о книге можно в твиттере по этому [адресу](https://twitter.com/search?q=#everydayrailsrspec)
* * *
## Настройка учебного материала

Оригинальный репозиторий материала книги находится [здесь](https://github.com/everydayrails/rails-4-1-rspec-3-0)

Локально склонировать оригинал
`git clone git@github.com:everydayrails/rails-4-1-rspec-3-0.git`

Настройка для push'а в свой репозиторий
`git remote set-url --push origin git@github.com:iavianm/rails-4-1-rspec-3-0.git`

Переключиться на ветку 1 главы
`git checkout -b 01_untested origin/01_untested`
* * *

## **1 глава - Введение**

`Ruby on Rails` и автоматизированное тестирование идут рука об руку. Rails поставляется со встроенным тестовым фреймворком `minitest`, но его можно заменить на любой другой. Ruby Toolbox насчитывает 17 проектов [Unit Test Frameworks](https://www.ruby-toolbox.com/categories/testing_frameworks). 

Тестирование очень важно в `Rails`. Тем не менее, многие люди, разрабатывающие на `Rails`, либо вообще не тестируют свои проекты, либо добавляют лишь несколько символических `spec` для проверки моделей.

Автор считает, что для этого есть несколько причин:
- Работа с `Ruby` или веб-фреймворками - достаточно новая концепция и добавление дополнительной работы кажется просто лишней. 
- Существует ощутимая нехватка времени. Так как время на написание тестов отнимает время от написания функций.
- Привычка определять "тестирование" как практику кликанья по ссылкам в браузере



## Why RSpec?
>Aaron Sumner пишет, что ничего не имеет против других библиотек для тестирования и сам использует идущий сейчас из коробки ***minitest***, для тестирования отдельных библиотек. Но ***RSpec*** для него самый удобный фреймворк для тестирования. И объясняет это тем, что при использовании ***RSpec***, даже люди не разбирающиеся в программировании, могут прочитать спецификацию и понять что происходит.
- [RSpec](https://github.com/rspec/rspec-rails)
- [Minitest](https://github.com/minitest/minitest)
* * *
## Для кого эта книга
>Книгу надо прочитать тем, у кого уже есть навыки работы с Rails. И рекомендует почитать литературу
- Michael Hartl - [Rails Tutorial](https://www.railstutorial.org/)
- Daniel Kehoe - [Learn Ruby on Rails](https://learn-rails.com/)
- Sam Ruby - [Agile Web Development with Rails 4](https://pragprog.com/titles/rails4/agile-web-development-with-rails-4/)
* * *
## Философия тестирования

Обсуждение правильного способа тестирования Rails-приложения может вызвать серьезную дискуссию среди программистов. Доклад `Дэвида Хайнемайера-Хансена` на `Railsconf 2014`, в котором он объявил `TDD` "мертвым", вызвал новый виток дебатов по этой теме.

Подход автора к тестированию базируется на следующем:
- Тесты должны быть надежными.
- Тесты должны быть просты в написании.
- Тесты должны быть простыми для понимания.

Если учитывать эти три фактора, можно создать надежный набор тестов для вашего приложения.

Есть некоторые компромиссы:
- Не фокусируемся на скорости.
- Не фокусируемся на слишком DRY-коде в тестах, хотя в тестах это не всегда плохо.

В конечном итоге, тесты будут - надежные и понятные, может не очень оптимизированы, но это отличное начало.
* * *
## **Code conventions**

В учебном приложении используются:
- `Rails 4.1`
- `Ruby 2.1`, не рекомендуется использовать Ruby версию 1.8 и ниже.
- `RSpec 3.1`, `RSpec 3.0` был выпущен весной 2014 года. `RSpec 3.1` появился через несколько месяцев и в целом совместим с релизом 3.0. Относительно близок по синтаксису к `RSpec 2.14`, хотя есть несколько отличий.
* * *
## Исправления
Если обнаружаться неточности и ошибки, предлагается пройти по этому [адресу](https://github.com/everydayrails/rails-4-1-rspec-3-0/issues), для получения обратной связи

